# バックログ管理ルール

## 概要

このドキュメントは、プロジェクト「Buffon」の実装過程で発生する技術的負債や将来的な改善タスクを管理するためのルールを定義します。

## バックログの定義

バックログとは、以下のいずれかに該当するタスクのうち、github issue化されていないものです：

- ユーザの依頼を完了するために一時的に回避した技術的負債
- 実装中に発見した改善可能な箇所
- 将来的なリファクタリングが必要な箇所
- パフォーマンス最適化の機会
- テスト不足の箇所
- ドキュメント不足の箇所

## バックログ管理の原則

### 1. 記録タイミング

- ユーザの依頼またはGitHub issueの作業完了時
- 実装中に技術的負債を発生させた時
- TODOコメントを残した時

### 2. 記録しないもの

- ユーザが直接依頼したタスク自体
- 既に完了したタスク
- GitHub issueとして既に登録されている内容

### 3. 記録フォーマット

### Issue関連バックログ

```markdown
## Issue #XXX: [Issue Title]

<!-- Issue URL: <https://github.com/oratta/buffon/issues/XXX> -->

- [ ] [バックログ内容] - [簡潔な説明]
  - 詳細: [なぜ必要か、何を実現するか]
  - 影響範囲: [影響を受けるファイル/機能]
  - 参照: [関連ファイル、コミット、PR番号など]
  - 優先度: [High/Medium/Low]
  - 作成日: YYYY-MM-DD HH:MM
```

### Issue非関連バックログ

```markdown
## その他のバックログ

<!-- ユーザの依頼から発生したが、特定のissueに紐づかないタスク -->

- [ ] [バックログ内容] - [簡潔な説明]
  - 詳細: [なぜ必要か、何を実現するか]
  - 影響範囲: [影響を受けるファイル/機能]
  - 参照: [関連ファイル、コミット、会話の要約など]
  - 優先度: [High/Medium/Low]
  - 作成日: YYYY-MM-DD HH:MM
```

### 4. 完了時の記録 (Issueのコメントに記載)

```markdown
- [x] [バックログ内容] - [簡潔な説明]
  - 完了日: YYYY-MM-DD HH:MM
  - 解決方法: [どのように解決したかの簡潔な説明]
  - 関連PR/コミット: [該当する場合]
```

## 運用ルール

### 1. ファイル管理

- アクティブなバックログ: `docs/issues/backlog-list.md`

### 2. 優先度の定義

- **High**: 他のIssueに取り組む前にこなす必要がある
- **Medium**: 他のIssueの後でもいいがロンチ前に必ず取り組む必要がある
- **Low**: そのうちやればいい

### 3. コンテキスト保持

各バックログには以下の情報を必ず含める：

- 影響を受けるファイルの具体的なパス
- 問題の背景と技術的詳細
- 解決に必要な前提知識やドキュメントへのリンク

## LLMの作業フロー

### 作業開始前のチェックリスト

- 作業内容により解消される既存のバックログがないか確認する
- 作業がgithub issueの場合
  - 既存のバックログを解消することができる場合、issueの内容を更新して、該当のバックログを`docs/issues/backlog-list.md`から削除する

### 作業完了時のチェックリスト

1. 技術的負債を発生させたか確認
2. TODOコメントを残したか確認
3. テスト不足の箇所があるか確認
4. ドキュメント更新が必要か確認
5. `backlog-list.md`を更新
6. 解消したバックログを削除して、バックログ完了の記録を作業したgithub issueのコメントに記載する
   1. github issueと関係ない作業依頼によりバックログが解消した場合は解消したバックログ用のissueを作成して、closeにする

### バックログ作成時の必須項目

- [ ] 簡潔で明確なタスク説明
- [ ] 技術的背景の記載
- [ ] 影響範囲の明記
- [ ] 参照情報の提供
- [ ] 優先度の設定
- [ ] タイムスタンプの記録

## テンプレート

### バックログリスト

```markdown
# バックログリスト

> 最終更新: 2025-01-06 10:00
> アクティブなバックログ: 0件 | 完了: 0件

## 凡例

- [ ] 未完了のバックログ
- [x] 完了したバックログ
- 優先度: High 🔴 | Medium 🟡 | Low 🟢

---

## Issue #017: [UX1-BE-01] Supabaseデータベーススキーマ実装（ETF、市場データ）

<!-- Issue URL: <https://github.com/oratta/buffon/issues/17> -->

_このセクションは Issue #017 の作業中に発生したバックログを管理します_

<!-- 例:
- [ ] 🟡 ETFテーブルのインデックス最適化
  - 詳細: 頻繁にクエリされるcode, categoryカラムに複合インデックスが必要
  - 影響範囲: src/lib/supabase/queries/etf.ts
  - 参照: MVP-PRD.md#データモデル
  - 優先度: Medium
  - 作成日: 2025-01-06 10:00
-->

---

## その他のバックログ

<!-- ユーザの依頼から発生したが、特定のissueに紐づかないタスク -->

<!-- 例:
- [ ] 🟢 開発環境のDockerfile作成
  - 詳細: ローカル開発環境の統一化のためDockerコンテナ化が必要
  - 影響範囲: プロジェクトルート、開発環境セットアップ
  - 参照: 開発環境構築の会話 (2025-01-06)
  - 優先度: Low
  - 作成日: 2025-01-06 10:00
-->

---

## 統計情報

### 優先度別集計

- High 🔴: 0件
- Medium 🟡: 0件
- Low 🟢: 0件
```
